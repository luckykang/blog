---
layout: post
title: 机器学习系列06-常用科学计算库的使用 Seaborn
tag: 机器学习
---

### 1.seaborn介绍

Seaborn是基于matplotlib的图形可视化python包。它提供了一种高度交互式界面，便于用户能够做出各种有吸引力的统计图表。

Seaborn是在matplotlib的基础上进行了更高级的API封装，从而使得作图更加容易，在大多数情况下使用seaborn能做出很具有吸引力的图，而使用matplotlib就能制作具有更多特色的图。应该把Seaborn视为matplotlib的补充，而不是替代物。同时它能高度兼容numpy与pandas数据结构以及scipy与statsmodels等统计模式。

### 2.seaborn特点

其有如下特点：

- 基于matplotlib aesthetics绘图风格，增加了一些绘图模式
- 增加调色板功能，利用色彩丰富的图像揭示您数据中的模式
- 运用数据子集绘制与比较单变量和双变量分布的功能
- 运用聚类算法可视化矩阵数据
- 灵活运用处理时间序列数据
- 利用网格建立复杂图像集

### 3.安装与导入

    # 安装
    pip install seaborn

    # 导入
    import seaborn as sns

### 4.可视化数据的分布

当处理一组数据时，通常先要做的是了解变量是如何分布的。

- 1.对于单变量的数据来说，采用直方图核密度图曲线是个不错的选择。
- 2.对于双变量的数据来说，采用多面板图形展现，比如散点图、二维直方图、核密度估计图等

### 5.绘制单变量分布

可以采用最简单的直方图描述单变量的分布情况。 Seaborn中提供了 distplot()函数， 它默认绘制的是一个带有核密度估计曲线的直方图。
distplot()函数的语法格式如下。

    seaborn.distplot(a, bins=None, hist=True, kde=True, rug=False, fit=None, color=None)

上述函数中常用参数的含义如下：

(1) a： 表示要观察的数据， 可以是 Series、 一维数组或列表。

(2) bins： 用于控制条形的数量。

(3) hist： 接收布尔类型， 表示是否绘制(标注)直方图。

(4) kde： 接收布尔类型， 表示是否绘制高斯核密度估计曲线。

(5) rug： 接收布尔类型， 表示是否在支持的轴方向上绘制rugplot。

通过 distplot())函数绘制直方图的示例如下。

    import numpy as np
    import seaborn as sns

    sns.set()

    np.random.seed(0) # 确定随机数生成器的种子,如果不使用每次生成图形不一样

    arr = np.random.randn(100) # 生成随机数组

    ax = sns.distplot(arr, bins=10, hist=True, kde=True, rug=True) # 绘制直方图

运行结果如下图所示

![20210809164317](https://i.loli.net/2021/08/09/DC2kt5ifKM91q6x.png)

### 6.绘制双变量分布

两个变量的二元分布可视化也很有用。 在 Seaborn中最简单的方法是使用 jointplot()函数， 该函数可以创建一个多面板图形， 比如散点图、 二
维直方图、 核密度估计等， 以显示两个变量之间的双变量关系及每个变量在单坐标轴上的单变量分布。

jointplot()函数的语法格式如下。

    seaborn.jointplot(x, y, data=None,
    kind='scatter', stat_func=None, color=None,
    ratio=5, space=0.2, dropna=True)

上述函数中常用参数的含义如下：

(1) kind： 表示绘制图形的类型。

(2) stat_func： 用于计算有关关系的统计量并标注图。

(3) color： 表示绘图元素的颜色。

(4) size： 用于设置图的大小(正方形)。

(5) ratio： 表示中心图与侧边图的比例。 该参数的值越大， 则中心图的占比会越大。

(6) space： 用于设置中心图与侧边图的间隔大小

#### 6.1 绘制散点图

    import numpy as np
    import pandas as pd
    import seaborn as sns

    # 创建DataFrame对象
    dataframe_obj = pd.DataFrame({"x":np.random.randn(500),"y":np.random.randn(500)})
    
    sns.jointplot(x="x",y="y",data=dataframe_obj,kind="scatter",color="r",size=8,ratio=5,space=1)

上边的代码首先创建了一个 DataFrame对象 dataframe_obj作为散点图的数据， 其中x轴和y轴的数据均为500个随机数， 接着调用 jointplot0
函数绘制一个散点图， 散点图x轴的名称为“x”， y轴的名称为“y”。

运行结果如下：

![20210809165324](https://i.loli.net/2021/08/09/gS5oLrE2TwJdAb7.png)

#### 6.2 绘制二维直方图

二维直方图类似于“六边形”图， 主要是因为它显示了落在六角形区域内的观察值的计数， 适用于较大的数据集。 当调用 jointplot()函数时， 只
要传入kind="hex"， 就可以绘制二维直方图， 具体示例代码如下。

    import numpy as np
    import pandas as pd
    import seaborn as sns

    # 创建DataFrame对象
    dataframe_obj = pd.DataFrame({"x":np.random.randn(500),"y":np.random.randn(500)})
    sns.jointplot("x","y",data=dataframe_obj,kind="hex")

*注意* --

从六边形颜色的深浅，可以观察到数据密集的程度，另外，图形的上方和右侧仍然给出了直方图。在绘制二维直方图时， 最好使用白色
背景。

结果如下图：

![20210809165618](https://i.loli.net/2021/08/09/lZgAzXWOcm97kLF.png)

#### 6.3 绘制核密度估计图形

利用核密度估计同样可以查看二元分布， 其用等高线图来表示。 当调用jointplot()函数时只要传入ind="kde"， 就可以绘制核密度估计图形， 具体
示例代码如下。

    sns.jointplot(x="x", y="y", data=dataframe_obj, kind="kde")

上述示例中，绘制了核密度的等高线图，另外，在图形的上方和右侧给出了核密度曲线图

结果如下图：

![20210809172301](https://i.loli.net/2021/08/09/EBk6xRJ9ZmdoUAL.png)

#### 6.4 绘制成对的双变量分布

要想在数据集中绘制多个成对的双变量分布，则可以使用pairplot()函数实现，该函数会创建一个坐标轴矩阵，并且显示Datafram对象中每对变
量的关系。另外，pairplot()函数也可以绘制每个变量在对角轴上的单变量分布。

    import seaborn as sns

    # 加载seaborn中的数据集
    dataset = sns.load_dataset("iris")
    dataset.head()
    # 绘制多个成对的双变量分布
    sns.pairplot(dataset)

结果如下图

![20210809174229](https://i.loli.net/2021/08/09/Tg4YJS5FNLlU1Ir.png)



